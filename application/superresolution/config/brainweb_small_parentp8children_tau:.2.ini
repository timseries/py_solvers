[Application1]
name = velocity_imaging

[Input1]
name = Input
filedir = /media/Elements/Projects/thesis_results/mri_data/t1/
filemember = 
filename = t1_icbm_normal_1mm_pn0_rf0.mnc

[Input2]
name = Input
filedir = ../../data/avg_matrices
filemember = 
filename = 

[Preprocess1]
name = Preprocess
preprocesstype = brainwebmri
cropsize = 64 64 64

[Observe1]
name = Observe
observationtype = convolution_downsample
domain = fourier
modalities = ModalityArray1
transforms = TransformArray1
noisedistribution = gaussian
noisemean = 0
noisevariance = 2.28
noiseinterval = 0 1
wienerfactor = 0.001
interpinitialsolution = 0
seed = 10

[Transform1]
name = DTCWT
nlevels = 3
biort = near_sym_b
qshift = qshift_b

[Transform2]
name = Average
grouptype = parentchildren
averagetype = cluster
sparsematrixinput = Input2

[Transform3]
name = Average
grouptype = parentchildren
averagetype = group
sparsematrixinput = Input2

[Modality1_1]
name = Blur
type = gaussian
gaussiansigma = 0.42466090014400953 0.42466090014400953 0.84932180028801907
size = 5 5 5
csource = 0

[Modality1_2]
name = Downsample
downsamplefactor = 1 1 2
csource = 0

[ModalityArray1]
name = OperatorComp
operators = Modality1_1,Modality1_2

[TransformArray1]
name = OperatorComp
operators = Transform1

[Solver1]
name = MSIST
sparsepenalty = l0rl2_group
alphamethod = power_iteration
nuepsilonmethod = geometric
epsilonstart = 10
epsilonstop = .05
nustart = 250
nustop = .4
decay = .8
tau = .2
p_a = 8.0
p_b_0 = 0.0
p_theta = 1E-6
p_k = 0.5
alpha = 0.7
	0.4 0.4 0.4 0.4 0.4 0.4 0.5 0.4 0.4 0.4 0.4 0.4 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3
	0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.4 0.4 0.4 0.4 0.5 0.5 0.4 0.5 0.5 0.4 0.5 0.5 0.5 0.5 0.5 0.5
	0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5
modalities = ModalityArray1
transforms = TransformArray1
clusteraverage = Transform2
groupaverage = Transform3
results = Results1
nitn = 50

[Results1]
name = Results
metrics = ISNR1,OutputImage1,OutputImage2,OutputImage3,OutputImage4
desktop = 1
figuregridwidth = 3
figuregridheight = 2
outputdirectory = ~/repos/scratch/thesis_results/superresolution_mri
overwriteresults = 0
disablefigures = 1
rowoffset = 0

[ISNR1]
name = ISNR
key = ISNR
ylabel = ISNR
print = 1
figurelocation = 1

[OutputImage1]
name = OutputImage
outputextension = tif
title = Ground Truth
key = x
imrangekey = x
ylabel = Ground Truth
colormap = gray
colorbar = 1
lastframeonly = 1
updateonce = 1
saveoften = 0
figurelocation = 2

[OutputImage2]
name = OutputImage
outputextension = tif
title = Observation
key = y
imrangekey = x
ylabel = Ground Truth
colormap = gray
colorbar = 1
lastframeonly = 1
updateonce = 1
saveoften = 0
figurelocation = 2

[OutputImage3]
name = OutputImage
outputextension = tif
title = Initial Velocity
key = x_0
imrangekey = x
ylabel = Initial Velocity
colormap = gray
colorbar = 1
lastframeonly = 1
updateonce = 1
saveoften = 0
figurelocation = 3

[OutputImage4]
name = OutputImage
outputextension = tif
title = Current Iterate
key = x_n
imrangekey = x
ylabel = Current Iterate
colormap = gray
colorbar = 1
lastframeonly = 1
updateonce = 0
saveoften = 0
figurelocation = 4

